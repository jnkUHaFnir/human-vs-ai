    val = new char[strlen(whatever)];  <-forgot to +1 for the null terminator
    strcpy(val, whatever);