    rub[idx].name = (char *) malloc(strlen(tmp)+1);
    strcpy(rub[idx].name, tmp);
    //As well as in other like