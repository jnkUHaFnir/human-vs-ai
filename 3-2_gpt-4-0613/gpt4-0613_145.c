Please remember that this strategy would require modifications in your business process design.

Also, in case you continue using the same design, avoid storing a large string in one variable to refrain its buffer overflow. You could try writing it in the file instead to ease some memory usage, however, it may slow down the processing. 

On a similar note, if the server is not capable of processing 2500 files at once, ensure the script design and implementation is aligned with server capabilities too. 

Still, if you find the issue persists, it's best to involve someone who is well versed in performance tuning to identify what other factors could be contributing to this error.
